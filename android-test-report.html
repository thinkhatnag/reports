<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Android Test Report</title>
<style>

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:      #0a0c10;
  --sf:      #111318;
  --sf2:     #181c24;
  --sf3:     #1e2330;
  --bd:      #252b38;
  --bd2:     #2e3748;
  --tx:      #e8ecf4;
  --txm:     #8892a4;
  --txd:     #3d4759;
  --pass:    #34d17a;
  --fail:    #f04f6e;
  --skip:    #f5c843;
  --ios:     #4f9eff;
  --ios-dim:  rgba(79,158,255,.12);
  --ios-glow: rgba(79,158,255,.25);
  --and:     #34d17a;
  --and-dim:  rgba(52,209,122,.10);
  --and-glow: rgba(52,209,122,.22);
  --mono:    'Space Mono', monospace;
  --display: 'Syne', sans-serif;
}

html { scroll-behavior: smooth; }

body {
  font-family: var(--mono);
  background: var(--bg);
  color: var(--tx);
  min-height: 100vh;
  background-image:
    linear-gradient(rgba(79,158,255,.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(79,158,255,.03) 1px, transparent 1px);
  background-size: 48px 48px;
}

.page {
  max-width: 1300px;
  margin: 0 auto;
  padding: 40px 24px 80px;
}

.hdr {
  margin-bottom: 48px;
  position: relative;
}

.hdr h1 {
  font-family: var(--display);
  font-size: clamp(32px, 6vw, 56px);
  font-weight: 800;
  letter-spacing: -1.2px;
  line-height: 1.05;
  color: var(--tx);
}

.hdr h1 em {
  font-style: normal;
  background: linear-gradient(135deg, var(--ios) 0%, var(--and) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hdr-meta {
  font-size: 13px;
  color: var(--txm);
  letter-spacing: 0.5px;
  margin-top: 8px;
}

/* Stats cards - similar hover/glow as dashboard */
.stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 16px;
  margin-bottom: 40px;
}

.sc {
  background: var(--sf);
  border: 1px solid var(--bd);
  border-radius: 16px;
  padding: 20px 24px;
  position: relative;
  overflow: hidden;
  transition: transform .25s cubic-bezier(.16,1,.3,1), border .25s, box-shadow .25s;
}

.sc:hover {
  transform: translateY(-3px);
  box-shadow: 0 0 0 1px var(--ios-glow), 0 16px 48px rgba(0,0,0,.35);
  border-color: var(--ios);
}

.sc::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at 10% 40%, var(--ios-dim) 0%, transparent 70%);
  opacity: 0;
  transition: opacity .35s;
  pointer-events: none;
}

.sc:hover::before { opacity: 1; }

.sc-lbl {
  font-size: 10px;
  letter-spacing: 1.4px;
  text-transform: uppercase;
  color: var(--txd);
  margin-bottom: 8px;
}

.sc-val {
  font-family: var(--display);
  font-size: 36px;
  font-weight: 800;
  line-height: 1;
}

.sc.total .sc-val { color: var(--tx); }
.sc.p     .sc-val { color: var(--pass); }
.sc.f     .sc-val { color: var(--fail); }
.sc.s     .sc-val { color: var(--skip); }

/* Legend, toolbar, buttons, suites, table, etc. */
.legend {
  background: var(--sf2);
  border: 1px solid var(--bd);
  border-radius: 14px;
  padding: 12px 18px;
  margin-bottom: 24px;
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  font-size: 12px;
  color: var(--txm);
}

.leg-ttl { font-weight: 700; letter-spacing: 0.8px; }

.lb {
  min-width: 22px;
  height: 22px;
  border-radius: 6px;
  display: grid;
  place-items: center;
  font-size: 13px;
  font-weight: bold;
}

.lb.p { background: var(--pass); color: #000; }
.lb.f { background: var(--fail); color: #fff; }
.lb.s { background: var(--skip); color: #000; }

.toolbar {
  background: var(--sf);
  border: 1px solid var(--bd);
  border-radius: 14px;
  padding: 12px 18px;
  margin-bottom: 28px;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 16px;
}

.fg, .eg { display: flex; gap: 10px; flex-wrap: wrap; }

.fbtn {
  padding: 6px 14px;
  border-radius: 999px;
  border: 1px solid var(--bd);
  background: transparent;
  color: var(--txm);
  font-family: var(--mono);
  font-size: 11.5px;
  font-weight: 700;
  cursor: pointer;
  transition: all .2s;
}

.fbtn:hover { border-color: var(--bd2); color: var(--tx); background: var(--sf2); }

.fbtn.on { background: var(--sf3); color: var(--tx); border-color: var(--bd2); }

.fbtn[data-f="passed"].on  { background: var(--and-dim); border-color: var(--pass); color: var(--pass); }
.fbtn[data-f="failed"].on  { background: rgba(240,79,110,.09); border-color: var(--fail); color: var(--fail); }
.fbtn[data-f="skipped"].on { background: rgba(245,200,67,.07); border-color: var(--skip); color: var(--skip); }

/* ... continue with .sind, .suites, .sblock, .pill, table, .sb, .err-tip, .ci, .exp-btn, .footer ... */

.suites { display: flex; flex-direction: column; gap: 10px; }

.sblock {
  background: var(--sf);
  border: 1px solid var(--bd);
  border-radius: 16px;
  overflow: hidden;
}

.shdr {
  padding: 16px 22px;
  display: flex;
  align-items: center;
  gap: 14px;
  cursor: pointer;
  transition: background .2s;
}

.shdr:hover { background: var(--sf2); }

.sname {
  font-family: var(--display);
  font-size: 16px;
  font-weight: 800;
  letter-spacing: -0.3px;
  flex: 1;
}

.pill {
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 10.5px;
  font-weight: 700;
  font-family: var(--mono);
}

.pill.t { background: var(--sf2); color: var(--txm); border: 1px solid var(--bd); }
.pill.p { background: var(--and-dim); color: var(--pass); border: 1px solid rgba(52,209,122,.3); }
.pill.f { background: rgba(240,79,110,.1); color: var(--fail); border: 1px solid rgba(240,79,110,.3); }
.pill.s { background: rgba(245,200,67,.08); color: var(--skip); border: 1px solid rgba(245,200,67,.3); }

.sbody { display: none; border-top: 1px solid var(--bd); }
.sblock.open .sbody { display: block; }

.ttbl { width: 100%; border-collapse: collapse; }
.ttbl th {
  padding: 10px 16px;
  text-align: left;
  font-size: 10px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--txd);
  background: var(--sf2);
  border-bottom: 1px solid var(--bd);
}
.ttbl td { padding: 12px 16px; }
.ttbl tr:hover { background: var(--sf3); }
.ttbl tr.hide { display: none; }

.tname { font-size: 13px; min-width: 240px; max-width: 440px; word-break: break-word; }

.sb {
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.sb.passed  { background: var(--and-dim); color: var(--pass); border: 1px solid rgba(52,209,122,.35); }
.sb.failed  { background: rgba(240,79,110,.12); color: var(--fail); border: 1px solid rgba(240,79,110,.35); position: relative; cursor: help; }
.sb.skipped { background: rgba(245,200,67,.1); color: var(--skip); border: 1px solid rgba(245,200,67,.35); }

.err-tip {
  display: none;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  top: calc(100% + 10px);
  min-width: 260px;
  max-width: 480px;
  background: #1a0f14;
  color: #ffccd5;
  border: 1px solid var(--fail);
  padding: 12px 16px;
  border-radius: 10px;
  font-size: 12px;
  white-space: pre-wrap;
  z-index: 20;
  box-shadow: 0 8px 24px rgba(0,0,0,.55);
  font-family: var(--mono);
}

.sb.failed:hover .err-tip { display: block; }

.ci {
  width: 100%;
  padding: 8px 12px;
  background: var(--sf2);
  border: 1px solid var(--bd);
  border-radius: 8px;
  color: var(--tx);
  font-size: 12px;
  font-family: var(--mono);
}

.ci:focus {
  outline: none;
  border-color: var(--ios);
  box-shadow: 0 0 0 3px var(--ios-glow);
}

.exp-btn {
  padding: 10px 24px;
  background: linear-gradient(135deg, var(--ios), var(--and));
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 700;
  font-family: var(--display);
  cursor: pointer;
}

.footer {
  margin-top: 60px;
  text-align: center;
  font-size: 11px;
  color: var(--txd);
}

</style>
</head>
<body>
<div class="page">
<div class="hdr">
  <div>
  <h1>&#129302; Android Test Report <span>v2</span></h1>
  <div class="hdr-meta" id="hdrMeta">Loading&hellip;</div>
  </div>
  <a href="index.html" class="back">&larr; Dashboard</a>
</div>
<div class="stats">
  <div class="sc"><div class="sc-lbl">Total</div><div class="sc-val" id="sTotal">0</div></div>
  <div class="sc p"><div class="sc-lbl">&#10003; Passed</div><div class="sc-val" id="sPassed">0</div></div>
  <div class="sc f"><div class="sc-lbl">&#10007; Failed</div><div class="sc-val" id="sFailed">0</div></div>
  <div class="sc s"><div class="sc-lbl">&#8855; Skipped</div><div class="sc-val" id="sSkipped">0</div></div>
</div>
<div class="legend">
  <span class="leg-ttl">Legend</span>
  <div class="leg-item"><span class="lb p">&#10003; PASS</span> Test passed</div>
  <div class="leg-item"><span class="lb f">&#10007; FAIL</span> Test failed</div>
  <div class="leg-item"><span class="lb s">&#8855; SKIP</span> Skipped</div>
</div>
<div class="toolbar">
  <div class="fg">
    <span class="flbl">Filter:</span>
    <button class="fbtn on" data-f="all"     onclick="setF('all')">All</button>
    <button class="fbtn"    data-f="passed"  onclick="setF('passed')">&#10003; Pass</button>
    <button class="fbtn"    data-f="failed"  onclick="setF('failed')">&#10007; Fail</button>
    <button class="fbtn"    data-f="skipped" onclick="setF('skipped')">&#8855; Skip</button>
  </div>
  <div class="eg">
    <button class="cbtn" onclick="expandAll()">Expand All</button>
    <button class="cbtn" onclick="collapseAll()">Collapse All</button>
    <span class="sind" id="sind">&#10003; Saved</span>
  </div>
</div>
<div class="suites" id="suites"></div>
<div class="nores" id="nores">No tests match the current filter.</div>
<div class="exp-row">
  <button class="exp-btn" onclick="exportCSV()">&#128229; Export CSV</button>
</div>
<div class="footer">WebdriverIO + Appium + Allure &mdash; Android Automated Test Report</div>
</div>
<script>

var D = {"suites":[{"name":"Login","pairs":[{"base":"Login Error message verification: \"short Password\"","en":{"name":"Login Error message verification: \"short Password\"","baseTestName":"Login Error message verification: \"short Password\"","suite":"Login","passed":true,"skipped":false,"failed":false,"dur":17057,"err":null,"isSpanish":false,"status":"passed"},"es":null},{"base":"Login Error message verification: \"short password\"","en":null,"es":{"name":"Login Error message verification: \"short password\" -Es","baseTestName":"Login Error message verification: \"short password\"","suite":"Login","passed":true,"skipped":false,"failed":false,"dur":16011,"err":null,"isSpanish":true,"status":"passed"}},{"base":"Login Error messge verification: \"Email is not provided\"","en":{"name":"Login Error messge verification: \"Email is not provided\"","baseTestName":"Login Error messge verification: \"Email is not provided\"","suite":"Login","passed":true,"skipped":false,"failed":false,"dur":8840,"err":null,"isSpanish":false,"status":"passed"},"es":null},{"base":"Login Error message verification: \"password not provided\"","en":null,"es":{"name":"Login Error message verification: \"password not provided\" -Es ","baseTestName":"Login Error message verification: \"password not provided\"","suite":"Login","passed":true,"skipped":false,"failed":false,"dur":14204,"err":null,"isSpanish":true,"status":"passed"}},{"base":"Login Error message verification: \"invalid Email\"","en":{"name":"Login Error message verification: \"invalid Email\"","baseTestName":"Login Error message verification: \"invalid Email\"","suite":"Login","passed":true,"skipped":false,"failed":false,"dur":9080,"err":null,"isSpanish":false,"status":"passed"},"es":null}],"stats":{"total":5,"passed":5,"failed":0,"skipped":0}},{"name":"Existing Patient","pairs":[{"base":"Finalize encounter","en":{"name":"Finalize encounter","baseTestName":"Finalize encounter","suite":"Existing Patient","passed":true,"skipped":false,"failed":false,"dur":6603,"err":null,"isSpanish":false,"status":"passed"},"es":null},{"base":"Transcript Verification for the Draft Conversation","en":{"name":"Transcript Verification for the Draft Conversation","baseTestName":"Transcript Verification for the Draft Conversation","suite":"Existing Patient","passed":false,"skipped":false,"failed":true,"dur":10075,"err":"element (\"~Transcript\") still not displayed after 10000ms","isSpanish":false,"status":"broken"},"es":{"name":"Transcript Verification for the Draft Conversation -Es","baseTestName":"Transcript Verification for the Draft Conversation","suite":"Existing Patient","passed":true,"skipped":false,"failed":false,"dur":18384,"err":null,"isSpanish":true,"status":"passed"}},{"base":"Trascript verification","en":null,"es":{"name":"Trascript verification -Es","baseTestName":"Trascript verification","suite":"Existing Patient","passed":true,"skipped":false,"failed":false,"dur":18319,"err":null,"isSpanish":true,"status":"passed"}},{"base":"Patient info manual update","en":null,"es":{"name":"Patient info manual update -Es","baseTestName":"Patient info manual update","suite":"Existing Patient","passed":true,"skipped":false,"failed":false,"dur":23186,"err":null,"isSpanish":true,"status":"passed"}},{"base":"Offline Mode Stop and App Kill Verification","en":null,"es":{"name":"Offline Mode Stop and App Kill Verification -Es","baseTestName":"Offline Mode Stop and App Kill Verification","suite":"Existing Patient","passed":true,"skipped":false,"failed":false,"dur":81919,"err":null,"isSpanish":true,"status":"passed"}},{"base":"Transcript Verification for the Second Conversation","en":{"name":"Transcript Verification for the Second Conversation","baseTestName":"Transcript Verification for the Second Conversation","suite":"Existing Patient","passed":true,"skipped":false,"failed":false,"dur":14788,"err":null,"isSpanish":false,"status":"passed"},"es":null},{"base":"Hay Noki verification","en":null,"es":{"name":"Hay Noki verification -Es","baseTestName":"Hay Noki verification","suite":"Existing Patient","passed":true,"skipped":false,"failed":false,"dur":76148,"err":null,"isSpanish":true,"status":"passed"}},{"base":"App Killed in Offline and Reopened in Online Mode Verification","en":{"name":"App Killed in Offline and Reopened in Online Mode Verification","baseTestName":"App Killed in Offline and Reopened in Online Mode Verification","suite":"Existing Patient","passed":true,"skipped":false,"failed":false,"dur":57922,"err":null,"isSpanish":false,"status":"passed"},"es":null},{"base":"SoapNote Regeneration","en":{"name":"SoapNote Regeneration","baseTestName":"SoapNote Regeneration","suite":"Existing Patient","passed":true,"skipped":false,"failed":false,"dur":67880,"err":null,"isSpanish":false,"status":"passed"},"es":null}],"stats":{"total":10,"passed":9,"failed":1,"skipped":0}},{"name":"Forgot Password","pairs":[{"base":"Verify Reset Password mail generation","en":null,"es":{"name":"Verify Reset Password mail generation -Es","baseTestName":"Verify Reset Password mail generation","suite":"Forgot Password","passed":false,"skipped":false,"failed":true,"dur":21074,"err":"element (\"~El enlace para restablecer la contraseña ha sido enviado correctamente a su correo electrónico.\") still not displayed after 10000ms","isSpanish":true,"status":"broken"}},{"base":"Error message verifcation: \"Email not Enterd\"","en":{"name":"Error message verifcation: \"Email not Enterd\"","baseTestName":"Error message verifcation: \"Email not Enterd\"","suite":"Forgot Password","passed":true,"skipped":false,"failed":false,"dur":10356,"err":null,"isSpanish":false,"status":"passed"},"es":null},{"base":"Error message verification: \"Email is not rigisterd\"","en":{"name":"Error message verification: \"Email is not rigisterd\"","baseTestName":"Error message verification: \"Email is not rigisterd\"","suite":"Forgot Password","passed":true,"skipped":false,"failed":false,"dur":12238,"err":null,"isSpanish":false,"status":"passed"},"es":null}],"stats":{"total":3,"passed":2,"failed":1,"skipped":0}},{"name":"New Patient","pairs":[{"base":"Referal Generation and Regeneration","en":null,"es":{"name":"Referal Generation and Regeneration-Es","baseTestName":"Referal Generation and Regeneration","suite":"New Patient","passed":true,"skipped":false,"failed":false,"dur":53849,"err":null,"isSpanish":true,"status":"passed"}},{"base":"Transcript Verification for the Second Conversation for the First Encounter","en":null,"es":{"name":"Transcript Verification for the Second Conversation for the First Encounter -Es","baseTestName":"Transcript Verification for the Second Conversation for the First Encounter","suite":"New Patient","passed":true,"skipped":false,"failed":false,"dur":42838,"err":null,"isSpanish":true,"status":"passed"}},{"base":"SOAP Note Generation for the First Encounter","en":{"name":"SOAP Note Generation for the First Encounter","baseTestName":"SOAP Note Generation for the First Encounter","suite":"New Patient","passed":true,"skipped":false,"failed":false,"dur":195910,"err":null,"isSpanish":false,"status":"passed"},"es":null},{"base":"Care plan Generation and Regeneration","en":null,"es":{"name":"Care plan Generation and Regeneration-Es","baseTestName":"Care plan Generation and Regeneration","suite":"New Patient","passed":false,"skipped":false,"failed":true,"dur":140244,"err":"element (\"~Descargar\") still not displayed after 10000ms","isSpanish":true,"status":"broken"}},{"base":"SoapNote Regeneration","en":null,"es":{"name":"SoapNote Regeneration-Es","baseTestName":"SoapNote Regeneration","suite":"New Patient","passed":false,"skipped":false,"failed":true,"dur":11798,"err":"element (\"~Regenerar nota SOAP\") still not displayed after 10000ms","isSpanish":true,"status":"broken"}},{"base":"Transcript verification for the Second Conversation in First Encounter","en":{"name":"Transcript verification for the Second Conversation in First Encounter","baseTestName":"Transcript verification for the Second Conversation in First Encounter","suite":"New Patient","passed":true,"skipped":false,"failed":false,"dur":11749,"err":null,"isSpanish":false,"status":"passed"},"es":null}],"stats":{"total":6,"passed":4,"failed":2,"skipped":0}},{"name":"Setting","pairs":[{"base":"Verify Setting's screen launguage and general settings","en":{"name":"Verify Setting's screen launguage and general settings","baseTestName":"Verify Setting's screen launguage and general settings","suite":"Setting","passed":true,"skipped":false,"failed":false,"dur":16783,"err":null,"isSpanish":false,"status":"passed"},"es":null}],"stats":{"total":1,"passed":1,"failed":0,"skipped":0}}],"stats":{"total":25,"passed":21,"failed":4,"skipped":0},"meta":{"platform":"Android","reportDate":"2/24/2026, 11:02:28 AM","reportTS":"2026-02-24T05:32:28.446Z"}};

function sc(t){
  if(!t)return'';
  if(t.skipped)return'skipped';
  if(t.passed)return'passed';
  if(t.failed)return'failed';
  return'';
}
function slIcon(t){
  if(!t)return'';
  if(t.skipped)return'&#8855; SKIP';
  if(t.passed)return'&#10003; PASS';
  if(t.failed)return'&#10007; FAIL';
  return'';
}
function errTip(t){
  if(!t||!t.failed||!t.err)return'';
  var safe=t.err.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
  return'<span class="err-tip">'+safe+'</span>';
}

var suitesCont=document.getElementById('suites');
var rowIdx=0;

D.suites.forEach(function(suite,si){
  var name=suite.name,pairs=suite.pairs,stats=suite.stats;
  var block=document.createElement('div');
  block.className='sblock';
  block.setAttribute('data-si',si);

  var failPill=stats.failed?'<span class="pill f">&#10007; '+stats.failed+' failed</span>':'';
  var skipPill=stats.skipped?'<span class="pill s">&#8855; '+stats.skipped+' skipped</span>':'';
  var orderNum=si+1;

  block.innerHTML=
    '<div class="shdr" onclick="toggle('+si+')">'+
      '<div class="chev"><svg width="9" height="9" viewBox="0 0 9 9" fill="none"><path d="M2 1.5L6.5 4.5L2 7.5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></div>'+
      '<span class="suite-order">#'+orderNum+'</span>'+
      '<div class="sname">'+name+'</div>'+
      '<div class="pills-c">'+
        '<span class="pill t">'+stats.total+' tests</span>'+
        '<span class="pill p">&#10003; '+stats.passed+'</span>'+
        (stats.failed?'<span class="pill f">&#10007; '+stats.failed+'</span>':'')+
        (stats.skipped?'<span class="pill s">&#8855; '+stats.skipped+'</span>':'')+
      '</div>'+
      '<div class="pills-e">'+
        '<span class="pill t">'+stats.total+' total</span>'+
        '<span class="pill p">&#10003; '+stats.passed+' passed</span>'+
        failPill+skipPill+
      '</div>'+
    '</div>';

  var body=document.createElement('div');
  body.className='sbody';
  var table=document.createElement('table');
  table.className='ttbl';
  table.innerHTML='<thead><tr><th class="seq-col">#</th><th>Test Case</th><th>English</th><th>Spanish</th><th>Comments</th></tr></thead>';

  var tbody=document.createElement('tbody');
  var seqNum=1;

  pairs.forEach(function(pair){
    var base=pair.base,en=pair.en,es=pair.es;
    var key=rowIdx++;
    var enSC=sc(en),esSC=sc(es);

    var tr=document.createElement('tr');
    tr.setAttribute('data-k',key);
    tr.setAttribute('data-en',enSC);
    tr.setAttribute('data-es',esSC);

    var enHTML=en?'<span class="sb '+enSC+'">'+slIcon(en)+errTip(en)+'</span>':'';
    var esHTML=es?'<span class="sb '+esSC+'">'+slIcon(es)+errTip(es)+'</span>':'';

    tr.innerHTML=
      '<td class="seq-num">'+seqNum+'</td>'+
      '<td class="tname">'+base+'</td>'+
      '<td>'+enHTML+'</td>'+
      '<td>'+esHTML+'</td>'+
      '<td><input class="ci" type="text" data-k="'+key+'" placeholder="Add comment" oninput="saveC('+key+',this.value)"/></td>';

    tbody.appendChild(tr);
    seqNum++;
  });

  table.appendChild(tbody);
  body.appendChild(table);
  block.appendChild(body);
  suitesCont.appendChild(block);
});

document.getElementById('sTotal').textContent=D.stats.total;
document.getElementById('sPassed').textContent=D.stats.passed;
document.getElementById('sFailed').textContent=D.stats.failed;
document.getElementById('sSkipped').textContent=D.stats.skipped;
document.getElementById('hdrMeta').textContent='Platform: '+D.meta.platform+'  |  Generated: '+D.meta.reportDate;

function toggle(si){
  document.querySelector('.sblock[data-si="'+si+'"]').classList.toggle('open');
}
function expandAll(){
  document.querySelectorAll('.sblock:not(.gone)').forEach(function(b){b.classList.add('open');});
}
function collapseAll(){
  document.querySelectorAll('.sblock').forEach(function(b){b.classList.remove('open');});
}
function setF(f){
  document.querySelectorAll('.fbtn').forEach(function(b){b.classList.toggle('on',b.getAttribute('data-f')===f);});
  var vis=0;
  document.querySelectorAll('.sblock').forEach(function(block){
    var hits=0;
    block.querySelectorAll('tbody tr').forEach(function(row){
      var enS=row.getAttribute('data-en'),esS=row.getAttribute('data-es');
      var show=
        f==='all'    ?true:
        f==='passed' ?(enS==='passed'||esS==='passed'):
        f==='failed' ?(enS==='failed'||esS==='failed'):
        f==='skipped'?(enS==='skipped'||esS==='skipped'):true;
      row.classList.toggle('hide',!show);
      if(show)hits++;
    });
    var hide=hits===0;
    block.classList.toggle('gone',hide);
    if(!hide){vis++;block.classList.add('open');}
  });
  document.getElementById('nores').classList.toggle('show',vis===0);
}
function saveC(k,v){
  try{
    localStorage.setItem('android_c_'+k,v);
    var el=document.getElementById('sind');
    el.classList.add('show');
    clearTimeout(el._t);
    el._t=setTimeout(function(){el.classList.remove('show');},1800);
  }catch(e){}
}
function loadC(){
  document.querySelectorAll('.ci').forEach(function(inp){
    var v=localStorage.getItem('android_c_'+inp.getAttribute('data-k'));
    if(v)inp.value=v;
  });
}
function exportCSV(){
  function esc(s){return'"'+String(s).replace(/"/g,'""')+'"';}
  var rows=[['Suite','Test Case','English','Spanish','Comment']];
  var k=0;
  D.suites.forEach(function(suite){
    suite.pairs.forEach(function(pair){
      var en=pair.en,es=pair.es;
      var enStat=en?(en.skipped?'SKIP':en.passed?'PASS':'FAIL'):'';
      var esStat=es?(es.skipped?'SKIP':es.passed?'PASS':'FAIL'):'';
      var comment=localStorage.getItem('android_c_'+k)||'';
      rows.push([suite.name,pair.base,enStat,esStat,comment]);
      k++;
    });
  });
  var csv=rows.map(function(r){return r.map(esc).join(',');}).join('\n');
  var blob=new Blob([csv],{type:'text/csv;charset=utf-8;'});
  var url=URL.createObjectURL(blob);
  var a=document.createElement('a');
  a.href=url;
  a.download='android-test-report-'+D.meta.reportTS.split('T')[0]+'.csv';
  document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);
}
window.addEventListener('load',loadC);

</script>
</body>
</html>
